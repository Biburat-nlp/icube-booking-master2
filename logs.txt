⚡️  WebView loaded
⚡️  To Native ->  StatusBar setStyle 19748551
⚡️  TO JS {}
⚡️  To Native ->  App getLaunchUrl 19748552
⚡️  To Native ->  App addListener 19748553
⚡️  TO JS undefined
⚡️  [log] - VITE_KEYCLOAK_URL: https://icube-space.ru/kc
⚡️  [log] - VITE_KEYCLOAK_REALM: master
⚡️  [log] - VITE_KEYCLOAK_CLIENT_ID: frontend
⚡️  [log] - Platform: Native
⚡️  [log] - Redirect URI: icube://token
⚡️  [log] - Current URL: ionic://icube-space.ru
⚡️  To Native ->  App addListener 19748554
⚡️  To Native ->  Keyboard getResizeMode 19748555
⚡️  TO JS {"mode":"native"}
⚡️  [log] - Keycloak init - tokens from storage: {"hasToken":false,"hasRefresh":false,"hasId":false,"tokenPreview":"null","accessExp":"null"}
⚡️  [log] - Keycloak initialized: false
⚡️  [log] - Token after init: false
⚡️  [log] - Token value: null
⚡️  To Native ->  ⚡️  [log] - AuthProvider - Platform: Native
Preferences remove 19748556
⚡️  [log] - AuthProvider - Redirect URI: icube://token
⚡️  TO JS undefined
⚡️  To Native ->  Preferences remove 19748557
⚡️  TO JS undefined
⚡️  To Native ->  Preferences remove 19748558
⚡️  TO JS undefined
⚡️  To Native ->  Preferences remove 19748559
⚡️  TO JS undefined
⚡️  To Native ->  Preferences remove 19748560
⚡️  TO JS undefined
⚡️  To Native ->  Preferences set 19748561
⚡️  TO JS undefined
⚡️  To Native ->  Preferences set 19748562
⚡️  TO JS undefined
⚡️  To Native ->  Preferences set 19748563
⚡️  TO JS undefined
⚡️  To Native ->  Preferences set 19748564
⚡️  TO JS undefined
⚡️  [log] - PKCE prepare: {"verifierLen":64,"challenge":"dZmY...oOdg","state":"0GKb...zo4~"}
⚡️  To Native ->  InAppBrowser openInSystemBrowser 19748565
⚡️  TO JS undefined
WebContent[67010] 0x10f04c100 - [sessionID=1] WebProcess::updateFreezerStatus: isFreezable=1, error=-1
-[RTIInputSystemClient remoteTextInputSessionWithID:performInputOperation:]  perform input operation requires a valid sessionID. inputModality = Keyboard, inputOperation = <null selector>, customInfoType = UIEmojiSearchOperations
-[RTIInputSystemClient remoteTextInputSessionWithID:performInputOperation:]  perform input operation requires a valid sessionID. inputModality = Keyboard, inputOperation = <null selector>, customInfoType = UIEmojiSearchOperations
-[RTIInputSystemClient remoteTextInputSessionWithID:performInputOperation:]  perform input operation requires a valid sessionID. inputModality = Keyboard, inputOperation = <null selector>, customInfoType = UIEmojiSearchOperations
-[RTIInputSystemClient remoteTextInputSessionWithID:performInputOperation:]  perform input operation requires a valid sessionID. inputModality = Keyboard, inputOperation = <null selector>, customInfoType = UIEmojiSearchOperations
WebContent[67010] 0x10f04c100 - [sessionID=1] WebProcess::updateFreezerStatus: isFreezable=1, error=-1
-[RTIInputSystemClient remoteTextInputSessionWithID:performInputOperation:]  perform input operation requires a valid sessionID. inputModality = Keyboard, inputOperation = <null selector>, customInfoType = UIEmojiSearchOperations
WebContent[67010] 0x10f04c100 - [sessionID=1] WebProcess::updateFreezerStatus: isFreezable=1, error=-1
-[RTIInputSystemClient remoteTextInputSessionWithID:performInputOperation:]  perform input operation requires a valid sessionID. inputModality = Keyboard, inputOperation = <null selector>, customInfoType = UIEmojiSearchOperations
WebContent[67010] 0x10f04c100 - [sessionID=1] WebProcess::updateFreezerStatus: isFreezable=1, error=-1
WebContent[67010] 0x10f04c100 - [sessionID=1] WebProcess::updateFreezerStatus: isFreezable=1, error=-1
⚡️  TO JS {"iosSourceApplication":"com.apple.SafariViewService","iosOpenInPlace":"","url":"icube:\/\/token?state=0GKbV_gYbz4lG2wK32lNebkvLJeczo4~&session_state=04e74658-4d58-4d6f-8444-af4a6b9e9946&iss=https%3A%2F%2Ficube-space.ru%2Fkc%2Frealms%2Fmaster&code=a1a9f692
⚡️  [log] - AppUrlListener received URL: icube://token?state=0GKbV_gYbz4lG2wK32lNebkvLJeczo4~&session_state=04e74658-4d58-4d6f-8444-af4a6b9e9946&iss=https%3A%2F%2Ficube-space.ru%2Fkc%2Frealms%2Fmaster&code=a1a9f692-b31f-4af8-8d84-7e0eed8fe264.04e74658-4d58-4d6f-8444-af4a6b9e9946.c313ab94-f79f-4d24-88df-e40fe9aef029
⚡️  To Native ->  Preferences get 19748566
⚡️  TO JS {"value":null}
WebContent[67010] 0x10f04c100 - [sessionID=1] WebProcess::updateFreezerStatus: isFreezable=1, error=-1
⚡️  To Native ->  Preferences set 19748567
⚡️  TO JS undefined
WebContent[67010] 0x10f04c100 - [sessionID=1] WebProcess::updateFreezerStatus: isFreezable=1, error=-1
⚡️  To Native ->  Preferences get 19748568
⚡️  TO JS {"value":"0GKbV_gYbz4lG2wK32lNebkvLJeczo4~"}
WebContent[67010] 0x10f04c100 - [sessionID=1] WebProcess::updateFreezerStatus: isFreezable=1, error=-1
⚡️  To Native ->  InAppBrowser close 19748569
WebContent[67010] 0x10f04c100 - [sessionID=1] WebProcess::updateFreezerStatus: isFreezable=1, error=-1
-[RTIInputSystemClient remoteTextInputSessionWithID:performInputOperation:]  perform input operation requires a valid sessionID. inputModality = Keyboard, inputOperation = <null selector>, customInfoType = UIEmojiSearchOperations
-[RTIInputSystemClient remoteTextInputSessionWithID:performInputOperation:]  perform input operation requires a valid sessionID. inputModality = Keyboard, inputOperation = <null selector>, customInfoType = UIEmojiSearchOperations
-[RTIInputSystemClient remoteTextInputSessionWithID:performInputOperation:]  perform input operation requires a valid sessionID. inputModality = Keyboard, inputOperation = <null selector>, customInfoType = UIEmojiSearchOperations
-[RTIInputSystemClient remoteTextInputSessionWithID:performInputOperation:]  perform input operation requires a valid sessionID. inputModality = Keyboard, inputOperation = <null selector>, customInfoType = UIEmojiSearchOperations
⚡️  TO JS undefined
⚡️  [log] - Exchanging auth code for tokens (query) ...
⚡️  To Native ->  Preferences get 19748570
⚡️  TO JS {"value":"icube:\/\/token"}
⚡️  [log] - Using redirectUri for exchange: icube://token
⚡️  To Native ->  Preferences get 19748571
⚡️  TO JS {"value":"4~iymAbQN5.bKjc~JtjzJyg~LdkwjIyd.AWBluhkstf5TOAE3eQsCeQRUTMHdNds"}
⚡️  To Native ->  Preferences get 19748572
⚡️  TO JS {"value":"dZmYWqSZJofdg7j8V7Il1vAol74-u3eceHc2eodoOdg"}
⚡️  [log] - PKCE check: {"verifierLen":64,"challengeSaved":"dZmY...oOdg","challengeRecalc":"dZmY...oOdg"}
⚡️  To Native ->  CapacitorHttp request 19748573
nw_socket_set_connection_idle [C1.1.1.1:3] setsockopt SO_CONNECTION_IDLE failed [42: Protocol not available]
nw_socket_set_connection_idle [C1.1.1.1:3] setsockopt SO_CONNECTION_IDLE failed [42: Protocol not available]
⚡️  TO JS {"url":"https:\/\/icube-space.ru\/kc\/realms\/master\/protocol\/openid-connect\/token","headers":{"content-type":"application\/json","x-content-type-options":"nosniff","date":"Mon, 13 Oct 2025 18:41:25 GMT","x-xss-protection":"1; mode=block","strict-transp
⚡️  [log] - Token exchange successful, saving tokens...
⚡️  [log] - Tokens saved to storage
⚡️  [log] - Keycloak instance updated with new tokens
⚡️  To Native ->  Preferences remove 19748574
⚡️  TO JS undefined
⚡️  To Native ->  Preferences remove 19748575
⚡️  TO JS undefined
⚡️  [log] - Cleaned up PKCE data
-[RTIInputSystemClient remoteTextInputSessionWithID:textSuggestionsChanged:]  Can only set suggestions for an active session. sessionID = BEF04121-C185-4624-AF29-5EED94F3A5D4
⚡️  WebView loaded
⚡️  To Native ->  StatusBar setStyle 57481323
⚡️  TO JS {}
⚡️  To Native ->  App getLaunchUrl 57481324
⚡️  To Native ->  App addListener 57481325
⚡️  TO JS {"url":"icube:\/\/token?state=0GKbV_gYbz4lG2wK32lNebkvLJeczo4~&session_state=04e74658-4d58-4d6f-8444-af4a6b9e9946&iss=https%3A%2F%2Ficube-space.ru%2Fkc%2Frealms%2Fmaster&code=a1a9f692-b31f-4af8-8d84-7e0eed8fe264.04e74658-4d58-4d6f-8444-af4a6b9e9946.c313ab9
⚡️  TO JS undefined
⚡️  [log] - VITE_KEYCLOAK_URL: https://icube-space.ru/kc
⚡️  [log] - VITE_KEYCLOAK_REALM: master
⚡️  [log] - VITE_KEYCLOAK_CLIENT_ID: frontend
⚡️  [log] - Platform: Native
⚡️  [log] - Redirect URI: icube://token
⚡️  [log] - Current URL: ionic://icube-space.ru/
⚡️  To Native ->  Preferences get 57481326
⚡️  [log] - AppUrlListener received URL: icube://token?state=0GKbV_gYbz4lG2wK32lNebkvLJeczo4~&session_state=04e74658-4d58-4d6f-8444-af4a6b9e9946&iss=https%3A%2F%2Ficube-space.ru%2Fkc%2Frealms%2Fmaster&code=a1a9f692-b31f-4af8-8d84-7e0eed8fe264.04e74658-4d58-4d6f-8444-af4a6b9e9946.c313ab94-f79f-4d24-88df-e40fe9aef029
⚡️  TO JS {"value":"a1a9f692-b31f-4af8-8d84-7e0eed8fe264.04e74658-4d58-4d6f-8444-af4a6b9e9946.c313ab94-f79f-4d24-88df-e40fe9aef029"}
⚡️  [log] - Code already processed, skipping: a1a9f692-b...
⚡️  To Native ->  App addListener 57481327
⚡️  To Native ->  Keyboard getResizeMode 57481328
⚡️  TO JS {"mode":"native"}
⚡️  [log] - Keycloak init - tokens from storage: {"hasToken":true,"hasRefresh":true,"hasId":true,"tokenPreview":"eyJhbGciOiJSUzI1NiIs...","accessExp":"2025-10-13T18:51:25.635Z"}
⚡️  To Native ->  CapacitorHttp request 57481329
nw_socket_set_connection_idle [C1.1.1.1:3] setsockopt SO_CONNECTION_IDLE failed [42: Protocol not available]
nw_socket_set_connection_idle [C1.1.1.1:3] setsockopt SO_CONNECTION_IDLE failed [42: Protocol not available]
⚡️  TO JS {"data":{"session_state":"04e74658-4d58-4d6f-8444-af4a6b9e9946","expires_in":600,"refresh_token":"eyJhbGciOiJIUzUxMiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJiYmU1MGEzMC01Mjg3LTQ3ZDgtYjM0Mi04NzA4NDM1ZTg1Y2MifQ.eyJleHAiOjE3NjAzODI2ODYsImlhdCI6MTc2MDM4MDg4NiwianRpIjo
⚡️  [log] - Keycloak initialized: true
⚡️  [log] - Token after init: true
⚡️  [log] - Token value: eyJhbGciOiJSUzI1NiIs...
⚡️  [log] - Token expires in: 599560 ms
⚡️  [log] - universalApi.get: /users/me Platform: Native
⚡️  [log] - API Request: /users/me Token available: true
⚡️  [log] - Authorization header added
nw_socket_set_connection_idle [C1.1.1.1:3] setsockopt SO_CONNECTION_IDLE failed [42: Protocol not available]
nw_socket_set_connection_idle [C1.1.1.1:3] setsockopt SO_CONNECTION_IDLE failed [42: Protocol not available]
⚡️  [log] - API Response Error: 401 /users/me Token available: true
⚡️  [error] - Auth init error: {"message":"Request failed with status code 401","name":"AxiosError","stack":"QT@ionic://icube-space.ru/assets/index-Bjl8pJBT.js:184:51729\nC@ionic://icube-space.ru/assets/index-Bjl8pJBT.js:184:56366\n@ionic://icube-space.ru/assets/index-Bjl8pJBT.js:184:64909","config":{"transitional":{"silentJSONParsing":true,"forcedJSONParsing":true,"clarifyTimeoutError":false},"adapter":["xhr","http","fetch"],"transformRequest":[null],"transformResponse":[null],"timeout":0,"xsrfCookieName":"XSRF-TOKEN","xsrfHeaderName":"X-XSRF-TOKEN","maxContentLength":-1,"maxBodyLength":-1,"env":{},"headers":{"Accept":"application/json, text/plain, */*","Content-Type":"application/json","Authorization":"Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICIzOUlxVm9TTTJSLTV0V25NcUotQ2xKZGszZm1yQjZTczRIaTV5QUl5Rm5JIn0.eyJleHAiOjE3NjAzODE0ODYsImlhdCI6MTc2MDM4MDg4NiwiYXV0aF90aW1lIjoxNzYwMzgwODg0LCJqdGkiOiJjZGIyNTgwOS1kNjM1LTQ5ZjEtOGUwNi05NDdhZWE4YWY4YjgiLCJpc3MiOiJodHRwczovL2ljdWJlLXNwYWNlLnJ1L2tjL3JlYWxtcy9tYXN0ZXIiLCJhdWQiOlsiYXBpIiwiaWN1YmUtc3BhY2UiLCJtYXN0ZXItcmVhbG0iLCJhY2NvdW50Il0sInN1YiI6ImExYzgxMWE1LTU0MDMtNGI1OC1hMjMwLTY3ODkwMDYwNjA3NiIsInR5cCI6IkJlYXJlciIsImF6cCI6ImZyb250ZW5kIiwic2Vzc2lvbl9zdGF0ZSI6IjA0ZTc0NjU4LTRkNTgtNGQ2Zi04NDQ0LWFmNGE2YjllOTk0NiIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiY2FwYWNpdG9yOi8vbG9jYWxob3N0IiwiKiIsImlvbmljOi8vaWN1YmUtc3BhY2UucnUiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbImNyZWF0ZS1yZWFsbSIsImRlZmF1bHQtcm9sZXMtbWFzdGVyIiwib2ZmbGluZV9hY2Nlc3MiLCJhZG1pbiIsInVtYV9hdXRob3JpemF0aW9uIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsibWFzdGVyLXJlYWxtIjp7InJvbGVzIjpbInZpZXctcmVhbG0iLCJ2aWV3LWlkZW50aXR5LXByb3ZpZGVycyIsIm1hbmFnZS1pZGVudGl0eS1wcm92aWRlcnMiLCJpbXBlcnNvbmF0aW9uIiwiY3JlYXRlLWNsaWVudCIsIm1hbmFnZS11c2VycyIsInF1ZXJ5LXJlYWxtcyIsInZpZXctYXV0aG9yaXphdGlvbiIsInF1ZXJ5LWNsaWVudHMiLCJxdWVyeS11c2VycyIsIm1hbmFnZS1ldmVudHMiLCJtYW5hZ2UtcmVhbG0iLCJ2aWV3LWV2ZW50cyIsInZpZXctdXNlcnMiLCJ2aWV3LWNsaWVudHMiLCJtYW5hZ2UtYXV0aG9yaXphdGlvbiIsIm1hbmFnZS1jbGllbnRzIiwicXVlcnktZ3JvdXBzIl19LCJhY2NvdW50Ijp7InJvbGVzIjpbIm1hbmFnZS1hY2NvdW50IiwibWFuYWdlLWFjY291bnQtbGlua3MiLCJ2aWV3LXByb2ZpbGUiXX19LCJzY29wZSI6Im9wZW5pZCBlbWFpbCBkamFuZ29fZ3JvdXBzIHByb2ZpbGUiLCJzaWQiOiIwNGU3NDY1OC00ZDU4LTRkNmYtODQ0NC1hZjRhNmI5ZTk5NDYiLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiZGphbmdvX2dyb3VwcyI6WyJhZG1pbiIsInN1cGVyYWRtaW4iXSwibmFtZSI6ItCQ0LTQvNC40L3QuNGB0YLRgNCw0YLQvtGAINCc0L7QsdC40LvRjNC90YvQuSIsInByZWZlcnJlZF91c2VybmFtZSI6Im1vYmlsZV9hZG1pbiIsImdpdmVuX25hbWUiOiLQkNC00LzQuNC90LjRgdGC0YDQsNGC0L7RgCIsImZhbWlseV9uYW1lIjoi0JzQvtCx0LjQu9GM0L3Ri9C5IiwiZW1haWwiOiJtb2JpbGVfYWRtaW5AdGVzdC5ydSJ9.dKC5Z3Dqj_TLe1wCNtqUS77gf2YZM1dctVOlSRsfrTO3N-E4ihGpvLRR76_cjxSaV-L7hiJPRbgwNSSGmKUwBdtbyi4EP9PGph9BlIgF9GOc-TN-nZhkzaXpC_XjBIcdboeI0t9OEn3ELRCN_l9oGXoYLczwEOS-YRrndV6Xf0zXk_5-pxx_n_LsjkHvhTHKUAVJYIZz7t1m3n9HQjyEtBnjVZhh2RnR29I5TZGtqIbEAsVGMj4zQasa9w7_bdH1ypRekvdQfYbF4GGFMR08jhlSNqf5LyZWoOXsB91TMiEbrUxZynZp5nf8ZdgV0YUi3LJl8Zd1HkhJQ74S5zcC9w"},"baseURL":"https://icube-space.ru/api","method":"get","url":"/users/me","allowAbsoluteUrls":true},"code":"ERR_BAD_REQUEST","status":401}